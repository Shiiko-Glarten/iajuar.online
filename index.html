<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>iajuar — kit hotspots</title>

  <!-- JetBrains Mono -->
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0b0b;
      --ink:#eaeaea;
      --ink-dim:#bdbdbd;
      --tip:#111;
      --accent:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:"JetBrains Mono",monospace;line-height:1.55}
    .wrap{max-width:1200px;margin:24px auto;padding:0 12px}
    .imgStage{position:relative;user-select:none}
    .imgStage>img{display:block;max-width:100%;height:auto;margin:0 auto}
    /* hotspot marker */
    .hs{
      position:absolute;
      width:18px;height:18px;
      border-radius:50%;
      background:rgba(255,255,255,.58);
      box-shadow:0 0 0 1px rgba(255,255,255,.35) inset, 0 0 12px rgba(0,0,0,.35);
      transform:translate(-50%,-50%);
      cursor:pointer; 
    }
    .hs:focus{outline:2px solid rgba(255,255,255,.8);outline-offset:2px}
    .hs:hover{background:rgba(255,255,255,.75)}
    /* tooltip */
    .tip{
      position:absolute; left:50%; top:-10px; transform:translate(-50%,-100%);
      background:var(--tip); color:var(--ink);
      padding:6px 8px; border-radius:8px; font-size:12px;
      white-space:nowrap; pointer-events:none; opacity:0; transition:opacity .15s ease;
      box-shadow:0 4px 14px rgba(0,0,0,.35);
    }
    .hs:hover .tip, .hs.show .tip{opacity:1}
    /* helper overlay (alignment mode) */
    .bar{
      position:sticky; top:0; z-index:10; background:#111; border:1px solid #222; border-left:none;border-right:none;
      padding:10px 12px; display:flex; gap:10px; align-items:center; justify-content:space-between
    }
    .bar small{color:var(--ink-dim)}
    .bar button{
      background:#1b1b1b;color:#eee;border:1px solid #2c2c2c;border-radius:8px;padding:8px 10px;font-family:inherit;cursor:pointer
    }
    .bar button:hover{background:#242424}
    .pill{display:inline-flex;gap:6px;align-items:center}
    .pill b{color:#fff}
    .kbd{font-size:.85em;background:#181818;border:1px solid #2b2b2b;border-bottom-color:#222;border-radius:6px;padding:2px 6px}
    .msg{font-size:.9rem;color:var(--ink-dim)}
    #description{max-width:900px;margin:24px auto 64px;background:#0f0f0f;border:1px solid #1d1d1d;border-radius:14px;padding:18px}
    #description h2{margin:0 0 10px 0;font-size:1.05rem;color:#fff}
    #description p{margin:0;color:#cfcfcf}
  </style>
</head>
<body>

  <!-- Alignment/placement toolbar (click-to-place precise coords). 
       If coords already exist in localStorage, hotspots render immediately. -->
  <div class="bar wrap" id="toolbar">
    <div class="pill">
      <b>Alignment mode</b>
      <small id="modeHint" class="msg">Click the image to place current item at the exact Helvetica number position.</small>
    </div>
    <div class="pill">
      <small id="itemLabel" class="msg"></small>
      <button id="prevBtn" title="Previous (←)">◀︎ Prev</button>
      <button id="nextBtn" title="Next (→)">Next ▶︎</button>
      <button id="toggleBtn" title="Toggle editor (E)"><span id="toggleTxt">Exit</span> editor</button>
      <button id="saveBtn" title="Save to localStorage">Save</button>
      <button id="resetBtn" title="Clear saved">Reset</button>
      <button id="exportBtn" title="Copy JSON">Export</button>
    </div>
  </div>

  <div class="wrap">
    <div class="imgStage" id="stage">
      <!-- Absolute URL so it *always* loads -->
      <img id="kit" src="https://Shiiko-Glarten.github.io/iajuar.online/images/IMG_4435.jpeg" alt="kit layout" />
      <!-- Hotspots will be injected here using saved coordinates -->
    </div>
  </div>

  <div id="description" class="wrap">
    <h2>DESCRIPTION</h2>
    <p>Paste your full document here. All hotspots currently scroll to this section.</p>
  </div>

<script>
/* ===== Configuration ===== */
const ITEMS = [
  "First Aid Kit","Umbrella","Admin Organizer","Bandana","Mask","Cap","Carabiner",
  "A6 Notebook","International Drivers Permit","Passport/Visa Photos","Wallet","Coin Carrier",
  "Passport","Uniball Vision Elite","PaperMate Flair","Combat Boots","Barefoot Sandals","Hygiene Kit",
  "REI Trail 25","MacBook Air","Packable Tote","Fjallraven Greenland Pocket","Clothing + Stuffsack",
  "Belt","Apple Watch S10","AirTag x2","35W Adapter","Chargers","AirPods Pro","Anker 10k Powerbank",
  "Regional Adapter","128gb Flash Drive","Headphone Adapter","Headlamp"
];

// storage key for your repo
const STORE_KEY = "iajuar_hotspots_v2";

/* ===== State ===== */
let points = loadPoints(); // array of {top,left} in %
let editor = true;         // alignment mode on by default
let idx = firstUnplacedIndex(points);

/* ===== DOM ===== */
const stage = document.getElementById('stage');
const img = document.getElementById('kit');
const toolbar = document.getElementById('toolbar');
const itemLabel = document.getElementById('itemLabel');
const toggleBtn = document.getElementById('toggleBtn');
const toggleTxt = document.getElementById('toggleTxt');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const saveBtn = document.getElementById('saveBtn');
const resetBtn = document.getElementById('resetBtn');
const exportBtn = document.getElementById('exportBtn');

/* ===== Helpers ===== */
function loadPoints(){
  const saved = localStorage.getItem(STORE_KEY);
  if(saved){
    try{
      const arr = JSON.parse(saved);
      if(Array.isArray(arr) && arr.length === ITEMS.length) return arr;
    }catch(e){}
  }
  // start empty
  return new Array(ITEMS.length).fill(null);
}
function firstUnplacedIndex(arr){
  const i = arr.findIndex(p => !p);
  return i === -1 ? 0 : i;
}
function setLabel(){
  itemLabel.textContent = `Item ${idx+1}/${ITEMS.length}: ${ITEMS[idx]}`;
}
function percentFromEvent(e){
  const rect = img.getBoundingClientRect();
  const x = (e.clientX - rect.left) / rect.width * 100;
  const y = (e.clientY - rect.top) / rect.height * 100;
  return { left: clamp(x,0,100), top: clamp(y,0,100) };
}
function clamp(v,min,max){ return Math.min(max, Math.max(min, v)); }
function renderHotspots(){
  // remove old
  [...stage.querySelectorAll('.hs')].forEach(n => n.remove());
  // add for each placed point
  points.forEach((p,i)=>{
    if(!p) return;
    const d = document.createElement('button');
    d.className = 'hs';
    d.style.left = p.left + '%';
    d.style.top  = p.top  + '%';
    d.setAttribute('aria-label', ITEMS[i]);
    d.innerHTML = `<span class="tip">${ITEMS[i]}</span>`;
    d.addEventListener('click', ()=>{
      // second tap/ click scroll
      d.classList.toggle('show');
      if(d.classList.contains('show')){
        setTimeout(()=>{ 
          document.getElementById('description').scrollIntoView({behavior:'smooth'});
        }, 120);
      }
    });
    stage.appendChild(d);
  });
}
function save(){ localStorage.setItem(STORE_KEY, JSON.stringify(points)); }
function resetAll(){
  localStorage.removeItem(STORE_KEY);
  points = new Array(ITEMS.length).fill(null);
  idx = 0;
  setLabel();
  renderHotspots();
}
function exportJSON(){
  const txt = JSON.stringify(points);
  navigator.clipboard?.writeText(txt);
  alert("Hotspot coordinates copied to clipboard.\n\n" + txt);
}

/* ===== Events ===== */
img.addEventListener('click', (e)=>{
  if(!editor) return;
  const pos = percentFromEvent(e);
  points[idx] = pos;
  idx = (idx + 1) % ITEMS.length;
  setLabel();
  renderHotspots();
});

toggleBtn.addEventListener('click', ()=>{
  editor = !editor;
  toggleTxt.textContent = editor ? "Exit" : "Enter";
  toolbar.querySelector('#modeHint').style.opacity = editor ? 1 : .6;
});
prevBtn.addEventListener('click', ()=>{
  idx = (idx - 1 + ITEMS.length) % ITEMS.length;
  setLabel();
});
nextBtn.addEventListener('click', ()=>{
  idx = (idx + 1) % ITEMS.length;
  setLabel();
});
saveBtn.addEventListener('click', save);
resetBtn.addEventListener('click', resetAll);
exportBtn.addEventListener('click', exportJSON);

// keyboard helpers
window.addEventListener('keydown', (e)=>{
  if(e.key === 'ArrowRight'){ nextBtn.click(); }
  if(e.key === 'ArrowLeft'){ prevBtn.click(); }
  if(e.key.toLowerCase() === 'e'){ toggleBtn.click(); }
});

/* ===== Init ===== */
img.addEventListener('load', ()=>{
  // If points already exist, skip straight to viewing
  if(points.some(Boolean)) editor = false;
  toggleTxt.textContent = editor ? "Exit" : "Enter";
  setLabel();
  renderHotspots();
});
</script>
</body>
</html>
